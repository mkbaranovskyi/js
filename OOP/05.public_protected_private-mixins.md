# Classes extra

- [Classes extra](#classes-extra)
	- [`public` | `protected` | `private`](#public--protected--private)
	- [Mixins](#mixins)

***

## `public` | `protected` | `private`

There're 3 classic kinds of fields in classes:

- `public` - default
- `protected`
- `private`

***

`public` fields are accessible from anywhere:

1. the owner class
2. descendent classes
3. instances

```js
class Parent {
	constructor(name) {
  	this.name = name
  }

	// 1. Access a public property from the owner class
	sayMyName(){
		return `My name is ${this.name}`
	}
}

class Child extends Parent {
	// 2. Access a public property from a descendent class
	constructor(name){
		super(name)
		this.childName = this.name.toUpperCase()
	}
	// 2. Access a public method from a descendent class
	sayMyChildName(){
		return super.sayMyName().replace('name', 'childname')
	}
}

const child = new Child('Max')

// 3. Access a public property from a class instance
console.log(child.name)					// `Max`
// 3. Access a public method from a class instance
console.log(child.sayMyName())	// `My name is Max`

// These work correctly as well, so 2. is fulfilled
console.log(child.childName)				// `MAX`
console.log(child.sayMyChildName())	// 'My childname is Max`
```

***

`protected` fields are only accessible from:

1. the owner class
2. descendent classes

There're no native `protected` fields in JS and it's hard to implement them. 

There's a conventioin to consider **_underscored** fields to be `protected`. Programmers should only access a field starting with `_` from its class derived classes. *But there's no way to enforce it.*

Usually you'd just make public getters/setters for your **_underscored** (kinda protected but not really) field. And only use **them** to access that field.

```js
class CoffeeMachine {
	_waterAmount = 0

	constructor(power) {
		this._power = power
	}

	// 1. Access a protected field from the owner class
	setWaterAmount(value) {
		if (value < 0) throw new Error('Can\'t be negative amount of water!')
		this._waterAmount = value
	}
  
  // 1. Access a protected field from the owner class
	getWaterAmount() {
		return this._waterAmount
	}

	getPower(){
		return this._power
	}
}

const coffeeMachine = new CoffeeMachine(800)

coffeeMachine.setWaterAmount(200)
console.log(coffeeMachine.getWaterAmount())	// 200
console.log(coffeeMachine.getPower())				// 800

// And don't you ever dare to access `_waterAmount` or `_power` from here directly!
```

***

`private` fields are only accessible from:

1. the owner class

You can only access `private` fields through the public interface in the same class.

There're 3 ways to make some data: `private`:

1. Closure
2. Module (basically also closure):
   1. Put your class to a separate module.
   2. Put a variable outside of that class in a module.
   3. Make an interface in the class to access the outer variable via the closure. There will be no other way to access it when you import your class in another module.
3. Private class fields starting with `#`.

```js
class Parent {
	#secret = "I'm afraid of ghosts"

	// 1. Access a private property from the owner class
	#getSecret(){
		return this.#secret
	}
  // 1. Access a private method from the owner class
	// This is a public interface method - it will be accessible from anywhere
  getSecret(){
    return this.#getSecret()
  }
}

class Child extends Parent {
	constructor(){
		super()
		// 2. NO access to a private property from a descendent class
		this.#childSecret = this.#secret	// SyntaxError
	}

  #getChildSecret(){
    // 2. NO access to a private method from a descendent class
  	super.#getSecret()								// SyntaxError
  }
}

const child = new Child()

// 3. NO access to a private property from a class instance
console.log(child.#childSecret)				// SyntaxError
// 3. NO access to a private method from a class instance
console.log(child.#getChildSecret())	// SyntaxError

// The only way to access private fields is through a public interface - if any exists
console.log(child.getSecret())	// `I'm afraid of ghosts`
```

There can also be `static` private fields - there's no difference. 

***


## Mixins

